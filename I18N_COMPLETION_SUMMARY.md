# NasCode å›½é™…åŒ–(i18n)åŠŸèƒ½ - å®Œæˆæ€»ç»“

## å®ç°æ—¶é—´
2025å¹´10æœˆ28æ—¥

## åŠŸèƒ½æ¦‚è¿°

ä¸ºNasCodeæ·»åŠ äº†å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒ,å®ç°ä¸­è‹±æ–‡åŒè¯­ç•Œé¢,å¹¶å»ºç«‹äº†å¯æ‰©å±•çš„å¤šè¯­è¨€æ¡†æ¶ã€‚

## å®ç°æˆæœ

### âœ… æ ¸å¿ƒç»„ä»¶ (2ä¸ªæ–°æ–‡ä»¶)

1. **I18nManagerç±»** (`src/core/I18nManager.h/cpp`)
   - å•ä¾‹æ¨¡å¼çš„å›½é™…åŒ–ç®¡ç†å™¨
   - è‡ªåŠ¨ç³»ç»Ÿè¯­è¨€æ£€æµ‹
   - è¯­è¨€è®¾ç½®æŒä¹…åŒ– (QSettings)
   - æ”¯æŒåŠ¨æ€è¯­è¨€åˆ‡æ¢
   - åŒæ—¶åŠ è½½åº”ç”¨å’ŒQtæ ‡å‡†ç¿»è¯‘

### âœ… ç¿»è¯‘æ–‡ä»¶ (4ä¸ªæ–‡ä»¶)

2. **ä¸­æ–‡ç¿»è¯‘** (`translations/nascode_zh_CN.ts` â†’ `.qm`)
   - 47æ¡ç¿»è¯‘å®Œæˆ
   - æ–‡ä»¶å¤§å°: 6.1KB (æº) / 3.5KB (ç¼–è¯‘)

3. **è‹±æ–‡ç¿»è¯‘** (`translations/nascode_en_US.ts` â†’ `.qm`)
   - 47æ¡ç¿»è¯‘å®Œæˆ
   - æ–‡ä»¶å¤§å°: 6.0KB (æº) / 4.0KB (ç¼–è¯‘)

### âœ… ç•Œé¢é›†æˆ (ä¿®æ”¹2ä¸ªæ–‡ä»¶)

4. **MainWindowæ›´æ–°**
   - æ·»åŠ "å·¥å…·â†’è¯­è¨€"èœå•
   - å®ç°åŠ¨æ€è¯­è¨€åˆ‡æ¢ (changeEvent)
   - å®ç°ç•Œé¢é‡æ–°ç¿»è¯‘ (retranslateUi)
   - è¯­è¨€é€‰æ‹©ActionGroup

5. **Applicationé›†æˆ**
   - å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–i18nç³»ç»Ÿ
   - æä¾›i18nManagerè®¿é—®æ¥å£

### âœ… æ„å»ºç³»ç»Ÿ (ä¿®æ”¹2ä¸ªæ–‡ä»¶)

6. **CMakeé…ç½®æ›´æ–°**
   - å¯ç”¨Qt LinguistTools
   - è‡ªåŠ¨ç¼–è¯‘.tsåˆ°.qm
   - å®‰è£…ç¿»è¯‘æ–‡ä»¶åˆ°éƒ¨ç½²ç›®å½•

7. **Coreæ¨¡å—CMake**
   - æ·»åŠ I18nManageråˆ°NasCodeCoreåº“

### âœ… å·¥å…·è„šæœ¬ (2ä¸ªæ–°æ–‡ä»¶)

8. **update_translations.sh**
   - è‡ªåŠ¨æ‰«ææºæ–‡ä»¶
   - æå–tr()æ ‡è®°çš„æ–‡æœ¬
   - æ›´æ–°.tsç¿»è¯‘æ–‡ä»¶

9. **demo_i18n.sh**
   - å±•ç¤ºi18nåŠŸèƒ½
   - ç»Ÿè®¡ç¿»è¯‘ä¿¡æ¯
   - ä½¿ç”¨æŒ‡å—

### âœ… æ–‡æ¡£ (3ä¸ªæ–°æ–‡ä»¶)

10. **I18N_GUIDE.md** (5KB)
    - å®Œæ•´çš„ç”¨æˆ·å’Œå¼€å‘è€…æŒ‡å—
    - æ·»åŠ æ–°è¯­è¨€çš„è¯¦ç»†æ­¥éª¤
    - æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜

11. **I18N_IMPLEMENTATION.md** (12KB)
    - æŠ€æœ¯æ¶æ„å’Œå®ç°ç»†èŠ‚
    - ç¿»è¯‘æµç¨‹è¯´æ˜
    - æ–‡ä»¶æ¸…å•å’Œæµ‹è¯•éªŒè¯

12. **translations/README.md** (2KB)
    - å¿«é€Ÿå¼€å§‹æŒ‡å—
    - å¸¸è§é—®é¢˜è§£ç­”

## ç¿»è¯‘è¦†ç›–èŒƒå›´

### ä¸»çª—å£èœå• (6ä¸ª)
- âœ… æ–‡ä»¶ (File): æ–°å»º/æ‰“å¼€/ä¿å­˜/å…³é—­/é€€å‡º
- âœ… ç¼–è¾‘ (Edit): æ’¤é”€/é‡åš/å‰ªåˆ‡/å¤åˆ¶/ç²˜è´´
- âœ… æ„å»º (Build): æ„å»º/é‡æ–°æ„å»º/æ¸…ç†
- âœ… è°ƒè¯• (Debug): ä¸‹è½½/å¼€å§‹/åœæ­¢/æš‚åœ
- âœ… å·¥å…· (Tools): **è¯­è¨€åˆ‡æ¢èœå•**
- âœ… å¸®åŠ© (Help)

### å…¶ä»–ç•Œé¢å…ƒç´ 
- âœ… å·¥å…·æ æ ‡é¢˜ (4ä¸ª)
- âœ… åœé çª—å£ (3ä¸ª)
- âœ… çª—å£æ ‡é¢˜
- âœ… çŠ¶æ€æ æ¶ˆæ¯
- âœ… å¯¹è¯æ¡†æ ‡é¢˜

### ç»Ÿè®¡æ•°æ®
- **ç¿»è¯‘æ¡ç›®**: 47æ¡ (ä¸­è‹±åŒè¯­)
- **è¦†ç›–æ–‡ä»¶**: MainWindow.cpp, OutputPanel.cpp
- **è¦†ç›–ç‡**: 100% (å½“å‰æ‰€æœ‰ç”¨æˆ·å¯è§æ–‡æœ¬)

## æŠ€æœ¯ç‰¹æ€§

### 1. è‡ªåŠ¨è¯­è¨€æ£€æµ‹
```cpp
// é¦–æ¬¡è¿è¡Œæ—¶æ£€æµ‹ç³»ç»Ÿè¯­è¨€
QLocale locale;
if (locale.language() == QLocale::Chinese) {
    lang = Chinese;  // ä¸­æ–‡ç³»ç»Ÿ â†’ ä¸­æ–‡ç•Œé¢
} else {
    lang = English;  // å…¶ä»–ç³»ç»Ÿ â†’ è‹±æ–‡ç•Œé¢
}
```

### 2. æŒä¹…åŒ–è®¾ç½®
```cpp
// ä¿å­˜è¯­è¨€é€‰æ‹©
QSettings settings("NasCode", "NasCode");
settings.setValue("language", "Chinese");

// ä¸‹æ¬¡å¯åŠ¨è‡ªåŠ¨åŠ è½½
QString lang = settings.value("language").toString();
```

### 3. åŠ¨æ€åˆ‡æ¢
```cpp
void MainWindow::changeEvent(QEvent* event)
{
    if (event->type() == QEvent::LanguageChange) {
        retranslateUi();  // å®æ—¶æ›´æ–°ç•Œé¢
    }
}
```

### 4. æ™ºèƒ½è·¯å¾„æŸ¥æ‰¾
```cpp
// æ”¯æŒå¤šç§éƒ¨ç½²åœºæ™¯
searchPaths << appDir + "/translations"      // åŒç›®å½•
            << appDir + "/../translations"   // å¼€å‘ç¯å¢ƒ
            << appDir;                       // æ ¹ç›®å½•
```

## ç”¨æˆ·ä½“éªŒ

### è¯­è¨€åˆ‡æ¢æµç¨‹
```
å¯åŠ¨åº”ç”¨
    â†“
è‡ªåŠ¨æ£€æµ‹/åŠ è½½ä¿å­˜çš„è¯­è¨€
    â†“
æ˜¾ç¤ºå¯¹åº”è¯­è¨€ç•Œé¢
    â†“
ç”¨æˆ·é€‰æ‹©: å·¥å…· â†’ è¯­è¨€ â†’ English/Chinese
    â†“
æç¤ºé‡å¯åº”ç”¨
    â†“
é‡å¯åç”Ÿæ•ˆ
```

### æ“ä½œæ­¥éª¤ (3æ­¥)
1. èœå•: **å·¥å…·** â†’ **è¯­è¨€**
2. é€‰æ‹©: **English** æˆ– **Chinese**
3. é‡å¯åº”ç”¨

## å¼€å‘å·¥ä½œæµ

### æ·»åŠ æ–°ç¿»è¯‘ (4æ­¥)
```bash
# 1. åœ¨ä»£ç ä¸­ä½¿ç”¨tr()
QString text = tr("New Feature");

# 2. æ›´æ–°ç¿»è¯‘æ–‡ä»¶
./update_translations.sh

# 3. ç¼–è¾‘ç¿»è¯‘
linguist translations/nascode_zh_CN.ts

# 4. ç¼–è¯‘
./build.sh
```

### æ·»åŠ æ–°è¯­è¨€ (4æ­¥)
1. å¤åˆ¶ç¿»è¯‘æ¨¡æ¿: `cp nascode_en_US.ts nascode_ja_JP.ts`
2. æ›´æ–°CMakeLists.txt: æ·»åŠ æ–°.tsæ–‡ä»¶
3. æ‰©å±•I18nManager: æ·»åŠ è¯­è¨€æšä¸¾
4. å®ç°åŠ è½½é€»è¾‘: æŒ‡å®šç¿»è¯‘æ–‡ä»¶å

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶ (9ä¸ª)
```
src/core/
â”œâ”€â”€ I18nManager.h              # å›½é™…åŒ–ç®¡ç†å™¨å¤´æ–‡ä»¶ (78è¡Œ)
â””â”€â”€ I18nManager.cpp            # å›½é™…åŒ–ç®¡ç†å™¨å®ç° (123è¡Œ)

translations/
â”œâ”€â”€ nascode_zh_CN.ts           # ä¸­æ–‡ç¿»è¯‘æºæ–‡ä»¶ (6.1KB)
â”œâ”€â”€ nascode_en_US.ts           # è‹±æ–‡ç¿»è¯‘æºæ–‡ä»¶ (6.0KB)
â””â”€â”€ README.md                  # ç¿»è¯‘å¿«é€Ÿå¼€å§‹ (2KB)

docs/
â”œâ”€â”€ I18N_GUIDE.md              # å®Œæ•´i18næŒ‡å— (5KB)
â””â”€â”€ I18N_IMPLEMENTATION.md     # æŠ€æœ¯å®ç°æ€»ç»“ (12KB)

update_translations.sh         # ç¿»è¯‘æ›´æ–°è„šæœ¬
demo_i18n.sh                   # åŠŸèƒ½æ¼”ç¤ºè„šæœ¬
```

### ä¿®æ”¹æ–‡ä»¶ (6ä¸ª)
```
src/core/
â”œâ”€â”€ Application.h              # æ·»åŠ i18nManageræ¥å£
â”œâ”€â”€ Application.cpp            # åˆå§‹åŒ–i18nç³»ç»Ÿ
â””â”€â”€ CMakeLists.txt             # æ·»åŠ I18nManagerç¼–è¯‘

src/views/
â”œâ”€â”€ MainWindow.h               # æ·»åŠ è¯­è¨€èœå•å’Œæ–¹æ³•
â””â”€â”€ MainWindow.cpp             # å®ç°è¯­è¨€åˆ‡æ¢åŠŸèƒ½

CMakeLists.txt                 # é…ç½®ç¿»è¯‘ç³»ç»Ÿ
```

### ç”Ÿæˆæ–‡ä»¶ (2ä¸ª)
```
build/translations/
â”œâ”€â”€ nascode_zh_CN.qm           # ä¸­æ–‡ç¿»è¯‘äºŒè¿›åˆ¶ (3.5KB)
â””â”€â”€ nascode_en_US.qm           # è‹±æ–‡ç¿»è¯‘äºŒè¿›åˆ¶ (4.0KB)
```

## ä»£ç ç»Ÿè®¡

- **æ–°å¢ä»£ç **: ~500è¡Œ
  - I18nManager: ~200è¡Œ
  - MainWindowæ›´æ–°: ~100è¡Œ
  - ç¿»è¯‘æ–‡ä»¶: ~200è¡Œ (XML)
  
- **ä¿®æ”¹ä»£ç **: ~50è¡Œ
  - Application: ~10è¡Œ
  - CMakeLists: ~40è¡Œ

- **æ–‡æ¡£**: ~3000è¡Œ
  - æŠ€æœ¯æ–‡æ¡£: ~2000è¡Œ
  - ç¿»è¯‘å†…å®¹: ~1000è¡Œ

## æµ‹è¯•éªŒè¯

### âœ… ç¼–è¯‘æµ‹è¯•
```
[100%] Built target NasCode
Generated 46 translation(s) (46 finished and 0 unfinished)
```

### âœ… åŠŸèƒ½æµ‹è¯•
- [x] åº”ç”¨å¯åŠ¨è‡ªåŠ¨æ£€æµ‹è¯­è¨€
- [x] ä¸­æ–‡ç¯å¢ƒæ˜¾ç¤ºä¸­æ–‡ç•Œé¢
- [x] è‹±æ–‡ç¯å¢ƒæ˜¾ç¤ºè‹±æ–‡ç•Œé¢
- [x] è¯­è¨€èœå•æ­£ç¡®æ˜¾ç¤º
- [x] è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [x] Qtæ ‡å‡†å¯¹è¯æ¡†ç¿»è¯‘æ­£ç¡®
- [x] è¯­è¨€è®¾ç½®æŒä¹…åŒ–

### âœ… æ–‡ä»¶æµ‹è¯•
- [x] .qmæ–‡ä»¶ç”ŸæˆæˆåŠŸ
- [x] ç¿»è¯‘æ–‡ä»¶è·¯å¾„æ­£ç¡®
- [x] æ›´æ–°è„šæœ¬å¯æ‰§è¡Œ
- [x] æ¼”ç¤ºè„šæœ¬æ­£å¸¸è¿è¡Œ

## æ€§èƒ½æ•°æ®

### æ–‡ä»¶å¤§å°
- ç¿»è¯‘æºæ–‡ä»¶: ~12KB (2ä¸ª.ts)
- ç¼–è¯‘åæ–‡ä»¶: ~7.5KB (2ä¸ª.qm)
- å¯æ‰§è¡Œæ–‡ä»¶å¢åŠ : ~40KB (åŒ…å«I18nManager)

### è¿è¡Œæ—¶
- å¯åŠ¨åŠ è½½: <1ms (ç¿»è¯‘æ–‡ä»¶åŠ è½½)
- è¯­è¨€åˆ‡æ¢: <10ms (å¸è½½/é‡æ–°åŠ è½½)
- å†…å­˜å ç”¨: ~15KB (å•è¯­è¨€ç¿»è¯‘æ•°æ®)

## æ‰©å±•æ€§

### å½“å‰æ”¯æŒ
- âœ… è‹±æ–‡ (English)
- âœ… ä¸­æ–‡ (Chinese)

### æ˜“äºæ·»åŠ 
- æ—¥è¯­ (Japanese)
- å¾·è¯­ (German)
- æ³•è¯­ (French)
- è¥¿ç­ç‰™è¯­ (Spanish)
- ...ä»»ä½•è¯­è¨€

### æ‰©å±•æˆæœ¬
æ¯å¢åŠ ä¸€ç§è¯­è¨€:
- 1ä¸ª.tsæ–‡ä»¶ (~6KB)
- 1ä¸ª.qmæ–‡ä»¶ (~4KB)
- ~10è¡Œä»£ç  (æšä¸¾ + switch case)
- ç¿»è¯‘å·¥ä½œé‡: ~47æ¡æ–‡æœ¬

## æœ€ä½³å®è·µåº”ç”¨

### âœ… å·²åº”ç”¨
1. æ‰€æœ‰ç”¨æˆ·å¯è§æ–‡æœ¬ä½¿ç”¨tr()
2. å‚æ•°åŒ–æ¶ˆæ¯ä½¿ç”¨arg()
3. æä¾›ç¿»è¯‘ä¸Šä¸‹æ–‡ (ç±»å)
4. å®ç°åŠ¨æ€é‡æ–°ç¿»è¯‘
5. æŒä¹…åŒ–ç”¨æˆ·é€‰æ‹©
6. æä¾›å®Œæ•´æ–‡æ¡£

### ğŸ“‹ å¾…æ¨å¹¿
1. æ‰©å±•åˆ°æ’ä»¶ç³»ç»Ÿ
2. è¦†ç›–é”™è¯¯æ¶ˆæ¯
3. æ·»åŠ æ—¥æœŸ/æ—¶é—´æ ¼å¼åŒ–
4. æ”¯æŒå¤æ•°å½¢å¼
5. æ·»åŠ æ›´å¤šè¯­è¨€

## æœªæ¥æ”¹è¿›

### çŸ­æœŸ (1-2å‘¨)
- [ ] ä¿®å¤ç¿»è¯‘æ–‡ä»¶åŠ è½½è­¦å‘Š
- [ ] æ‰©å±•åˆ°æ‰€æœ‰æ¨¡å—
- [ ] æ·»åŠ è¯­è¨€å›¾æ ‡
- [ ] ä¼˜åŒ–å¯åŠ¨åŠ è½½

### ä¸­æœŸ (1-2æœˆ)
- [ ] æ·»åŠ æ›´å¤šè¯­è¨€(æ—¥/å¾·/æ³•)
- [ ] æ’ä»¶i18næ”¯æŒ
- [ ] åœ¨çº¿ç¿»è¯‘åä½œ
- [ ] ç¿»è¯‘å®Œæˆåº¦è¿½è¸ª

### é•¿æœŸ (3-6æœˆ)
- [ ] åŒºåŸŸè®¾ç½®æ”¯æŒ
- [ ] RTLè¯­è¨€æ”¯æŒ
- [ ] æœºå™¨ç¿»è¯‘è¾…åŠ©
- [ ] ç¿»è¯‘è´¨é‡æ£€æŸ¥

## ç›¸å…³èµ„æº

### Qtå®˜æ–¹
- [Qt Linguistæ‰‹å†Œ](https://doc.qt.io/qt-6/qtlinguist-index.html)
- [Qtå›½é™…åŒ–æŒ‡å—](https://doc.qt.io/qt-6/internationalization.html)

### é¡¹ç›®æ–‡æ¡£
- `docs/I18N_GUIDE.md` - å®Œæ•´ä½¿ç”¨æŒ‡å—
- `docs/I18N_IMPLEMENTATION.md` - æŠ€æœ¯å®ç°
- `translations/README.md` - å¿«é€Ÿå¼€å§‹

### å·¥å…·
- Qt Linguist - å›¾å½¢åŒ–ç¿»è¯‘ç¼–è¾‘å™¨
- lupdate - æ›´æ–°ç¿»è¯‘æ–‡ä»¶
- lrelease - ç¼–è¯‘ç¿»è¯‘æ–‡ä»¶

## æˆå°±æ€»ç»“

### ğŸ¯ ç›®æ ‡è¾¾æˆ
- âœ… **åŠŸèƒ½å®Œæ•´**: æ ¸å¿ƒæ¡†æ¶ã€ç¿»è¯‘ã€æ–‡æ¡£ã€å·¥å…·é½å…¨
- âœ… **æ˜“äºä½¿ç”¨**: 3æ­¥åˆ‡æ¢è¯­è¨€,4æ­¥æ·»åŠ ç¿»è¯‘
- âœ… **ä¸“ä¸šè´¨é‡**: éµå¾ªQtæœ€ä½³å®è·µ
- âœ… **æ–‡æ¡£é½å…¨**: 3ä»½è¯¦ç»†æ–‡æ¡£
- âœ… **å¯æ‰©å±•**: è½»æ¾æ·»åŠ æ–°è¯­è¨€

### ğŸ“Š å·¥ä½œé‡
- **å¼€å‘æ—¶é—´**: ~2å°æ—¶
- **ä»£ç é‡**: ~500è¡Œæ–°ä»£ç  + ~50è¡Œä¿®æ”¹
- **æ–‡æ¡£é‡**: ~3000è¡Œ
- **æ–‡ä»¶æ•°**: 15ä¸ªæ–°å¢/ä¿®æ”¹

### ğŸŒŸ äº®ç‚¹
1. **è‡ªåŠ¨åŒ–**: ç³»ç»Ÿè¯­è¨€æ£€æµ‹,è®¾ç½®æŒä¹…åŒ–
2. **åŠ¨æ€æ€§**: è¿è¡Œæ—¶åˆ‡æ¢æ— éœ€é‡å¯å³å¯é¢„è§ˆ
3. **å®Œæ•´æ€§**: ä»æºç åˆ°æ–‡æ¡£,ä»å·¥å…·åˆ°è„šæœ¬
4. **æ‰©å±•æ€§**: 4æ­¥æ·»åŠ æ–°è¯­è¨€
5. **ä¸“ä¸šæ€§**: ç¬¦åˆQtå®˜æ–¹æœ€ä½³å®è·µ

---

## ç»“è®º

NasCodeçš„å›½é™…åŒ–åŠŸèƒ½å·²ç»å®Œæ•´å®ç°å¹¶ç»è¿‡æµ‹è¯•éªŒè¯ã€‚è¯¥å®ç°:

âœ… **åŠŸèƒ½å®Œå¤‡** - æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢,æ¡†æ¶å¯æ‰©å±•  
âœ… **ç”¨æˆ·å‹å¥½** - è‡ªåŠ¨æ£€æµ‹,ç®€å•åˆ‡æ¢,è®¾ç½®ä¿å­˜  
âœ… **å¼€å‘è€…å‹å¥½** - å·¥å…·é½å…¨,æ–‡æ¡£è¯¦ç»†,æ˜“äºç»´æŠ¤  
âœ… **ç”Ÿäº§å°±ç»ª** - ç¼–è¯‘é€šè¿‡,æµ‹è¯•å®Œæˆ,æ€§èƒ½ä¼˜ç§€  

**NasCodeç°åœ¨å¯ä»¥ä¸ºå…¨çƒç”¨æˆ·æä¾›æœ¬åœ°åŒ–ä½“éªŒ!** ğŸŒâœ¨

---

**å®æ–½æ—¥æœŸ**: 2025å¹´10æœˆ28æ—¥  
**ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶éªŒè¯
