# NasCode æ ¸å¿ƒæ¡†æ¶æ¶æ„æ€»ç»“

## ğŸ“‹ æŠ€æœ¯é€‰å‹

### âœ… é‡‡ç”¨çš„æˆç†Ÿæ¡†æ¶

| æ¡†æ¶/åº“ | ç”¨é€” | ä¼˜åŠ¿ |
|---------|------|------|
| **Qt6 Model/View** | MVCæ¶æ„åŸºç¡€ | æˆç†Ÿç¨³å®šã€ä¿¡å·æ§½æœºåˆ¶ã€è·¨å¹³å° |
| **Qt Plugin System** | æ’ä»¶ç®¡ç† | åŠ¨æ€åŠ è½½ã€å…ƒå¯¹è±¡ç³»ç»Ÿã€æ¥å£å®šä¹‰ |
| **spdlog** | æ—¥å¿—ç³»ç»Ÿ | é«˜æ€§èƒ½ã€å¤šsinkã€æ ¼å¼åŒ– |
| **Qt6::SerialPort** | ä¸²å£é€šè®¯ | è·¨å¹³å°ã€å¼‚æ­¥IO |
| **Qt6::Network** | ç½‘ç»œé€šè®¯ | TCP/UDPã€HTTPæ”¯æŒ |
| **QSettings** | é…ç½®ç®¡ç† | è·¨å¹³å°ã€INI/Registry |

### ğŸ”„ æ¨èé›†æˆçš„æ¡†æ¶

| æ¡†æ¶/åº“ | ç”¨é€” | é›†æˆä¼˜å…ˆçº§ |
|---------|------|-----------|
| **QScintilla** | ä»£ç ç¼–è¾‘å™¨ | â­â­â­â­â­ é«˜ |
| **ANTLR4** | ç¼–è¯‘å™¨å‰ç«¯ | â­â­â­â­â­ é«˜ |
| **nlohmann/json** | JSONè§£æ | â­â­â­â­ ä¸­é«˜ |
| **Google Test** | å•å…ƒæµ‹è¯• | â­â­â­ ä¸­ |
| **libmodbus** | Modbusåè®® | â­â­â­ ä¸­ (æ’ä»¶) |
| **open62541** | OPC UA | â­â­ ä½ (æ’ä»¶) |

## ğŸ—ï¸ MVCæ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Application                          â”‚
â”‚                      (åº”ç”¨ç¨‹åºæ ¸å¿ƒ)                           â”‚
â”‚  - å•ä¾‹æ¨¡å¼                                                  â”‚
â”‚  - ç”Ÿå‘½å‘¨æœŸç®¡ç†                                              â”‚
â”‚  - å…¨å±€æœåŠ¡æä¾›                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   EventBus      â”‚          â”‚  PluginManager   â”‚
    â”‚   (äº‹ä»¶æ€»çº¿)     â”‚          â”‚  (æ’ä»¶ç®¡ç†å™¨)      â”‚
    â”‚  - å‘å¸ƒ/è®¢é˜…     â”‚          â”‚  - åŠ¨æ€åŠ è½½       â”‚
    â”‚  - è§£è€¦é€šä¿¡     â”‚          â”‚  - ç”Ÿå‘½å‘¨æœŸç®¡ç†    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          MVC å±‚æ¬¡                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Model       â”‚    Controller    â”‚         View            â”‚
â”‚   (æ•°æ®æ¨¡å‹)     â”‚   (ä¸šåŠ¡æ§åˆ¶)      â”‚      (ç”¨æˆ·ç•Œé¢)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ProjectModel    â”‚ ProjectControllerâ”‚ MainWindow              â”‚
â”‚  - QAbstractItemâ”‚  - åè°ƒM-V       â”‚  - ä¸»çª—å£               â”‚
â”‚    Model        â”‚  - ç”¨æˆ·äº¤äº’      â”‚  - èœå•/å·¥å…·æ           â”‚
â”‚  - æ ‘å½¢ç»“æ„     â”‚  - ä¸šåŠ¡æµç¨‹      â”‚  - åœé çª—å£             â”‚
â”‚                 â”‚                  â”‚                         â”‚
â”‚ Project         â”‚ BuildController  â”‚ CodeEditor              â”‚
â”‚  - å·¥ç¨‹æ•°æ®     â”‚  - ç¼–è¯‘æ§åˆ¶      â”‚  - è¯­æ³•é«˜äº®             â”‚
â”‚  - åºåˆ—åŒ–       â”‚  - é”™è¯¯å¤„ç†      â”‚  - è¡Œå·æ˜¾ç¤º             â”‚
â”‚                 â”‚                  â”‚  - ä»£ç æŠ˜å              â”‚
â”‚ POU             â”‚ DebugController  â”‚                         â”‚
â”‚  - Program      â”‚  - è°ƒè¯•æ§åˆ¶      â”‚ OutputPanel             â”‚
â”‚  - Function     â”‚  - æ–­ç‚¹ç®¡ç†      â”‚  - æ„å»ºè¾“å‡º             â”‚
â”‚  - FunctionBlockâ”‚  - å˜é‡ç›‘è§†      â”‚  - è°ƒè¯•è¾“å‡º             â”‚
â”‚                 â”‚                  â”‚                         â”‚
â”‚ Variable        â”‚ CommController   â”‚ ProjectTreeView         â”‚
â”‚  - å˜é‡å®šä¹‰     â”‚  - è®¾å¤‡é€šè®¯      â”‚  - å·¥ç¨‹æ ‘               â”‚
â”‚  - ç±»å‹ç³»ç»Ÿ     â”‚  - ä¸‹è½½/ä¸Šä¼      â”‚  - å³é”®èœå•             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â–²                   â–²                    â–²
        â”‚                   â”‚                    â”‚
        â”‚ ä½¿ç”¨              â”‚ è°ƒç”¨               â”‚ æ˜¾ç¤º
        â”‚                   â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åº•å±‚æœåŠ¡                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Compiler      â”‚  Communication   â”‚      Plugins           â”‚
â”‚  (ç¼–è¯‘å™¨)       â”‚   (é€šè®¯æ¨¡å—)      â”‚     (æ’ä»¶)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Lexer        â”‚ - SerialPort     â”‚ - LD Editor            â”‚
â”‚ - Parser       â”‚ - TCP/UDP        â”‚ - FBD Editor           â”‚
â”‚ - CodeGen      â”‚ - STVM Protocol  â”‚ - SFC Editor           â”‚
â”‚ - Optimizer    â”‚ - Modbus (æ’ä»¶)  â”‚ - HMI Designer         â”‚
â”‚                â”‚ - OPC UA (æ’ä»¶)  â”‚ - Trend Viewer         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ ç›®å½•ç»“æ„ä¸èŒè´£

```
src/
â”œâ”€â”€ core/                          # æ ¸å¿ƒå±‚
â”‚   â”œâ”€â”€ Application.h/cpp         # åº”ç”¨ç¨‹åºå•ä¾‹
â”‚   â”œâ”€â”€ EventBus.h/cpp            # äº‹ä»¶æ€»çº¿
â”‚   â”œâ”€â”€ PluginManager.h/cpp       # æ’ä»¶ç®¡ç†
â”‚   â””â”€â”€ IPlugin.h                 # æ’ä»¶æ¥å£
â”‚
â”œâ”€â”€ models/                        # Modelå±‚(æ•°æ®)
â”‚   â”œâ”€â”€ Project.h/cpp             # å·¥ç¨‹æ•°æ®
â”‚   â”œâ”€â”€ POU.h/cpp                 # POUæ•°æ®
â”‚   â”œâ”€â”€ ProjectModel.h/cpp        # Qt Modelå®ç°
â”‚   â””â”€â”€ ...                       # å…¶ä»–æ•°æ®æ¨¡å‹
â”‚
â”œâ”€â”€ views/                         # Viewå±‚(ç•Œé¢)
â”‚   â”œâ”€â”€ MainWindow.h/cpp          # ä¸»çª—å£
â”‚   â”œâ”€â”€ CodeEditor.h/cpp          # ä»£ç ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ OutputPanel.h/cpp         # è¾“å‡ºé¢æ¿
â”‚   â””â”€â”€ ...                       # å…¶ä»–è§†å›¾ç»„ä»¶
â”‚
â”œâ”€â”€ controllers/                   # Controllerå±‚(é€»è¾‘)
â”‚   â”œâ”€â”€ ProjectController.h/cpp   # å·¥ç¨‹æ§åˆ¶
â”‚   â”œâ”€â”€ BuildController.h/cpp     # ç¼–è¯‘æ§åˆ¶(å¾…å®ç°)
â”‚   â”œâ”€â”€ DebugController.h/cpp     # è°ƒè¯•æ§åˆ¶(å¾…å®ç°)
â”‚   â””â”€â”€ ...                       # å…¶ä»–æ§åˆ¶å™¨
â”‚
â”œâ”€â”€ compiler/                      # ç¼–è¯‘å™¨
â”‚   â”œâ”€â”€ lexer/                    # è¯æ³•åˆ†æ
â”‚   â”œâ”€â”€ parser/                   # è¯­æ³•åˆ†æ
â”‚   â””â”€â”€ codegen/                  # ä»£ç ç”Ÿæˆ
â”‚
â”œâ”€â”€ communication/                 # é€šè®¯æ¨¡å—
â”‚   â”œâ”€â”€ serial/                   # ä¸²å£
â”‚   â””â”€â”€ tcp/                      # TCP/UDP
â”‚
â””â”€â”€ plugins/                       # æ’ä»¶
    â”œâ”€â”€ example/                  # ç¤ºä¾‹æ’ä»¶
    â””â”€â”€ ...                       # å…¶ä»–æ’ä»¶
```

## ğŸ”„ æ•°æ®æµä¸æ§åˆ¶æµ

### ç”¨æˆ·æ“ä½œæµç¨‹(ä»¥"æ‰“å¼€å·¥ç¨‹"ä¸ºä¾‹)

```
User Action                 View                Controller              Model
    â”‚                        â”‚                      â”‚                    â”‚
    â”‚  ç‚¹å‡»"Open Project"    â”‚                      â”‚                    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                    â”‚
    â”‚                        â”‚  onOpenProject()     â”‚                    â”‚
    â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚
    â”‚                        â”‚                      â”‚ openProject()      â”‚
    â”‚                        â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                        â”‚                      â”‚                    â”‚
    â”‚                        â”‚                      â”‚   loadFromFile()   â”‚
    â”‚                        â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                        â”‚                      â”‚                    â”‚
    â”‚                        â”‚   projectOpened()    â”‚                    â”‚
    â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
    â”‚                        â”‚                      â”‚                    â”‚
    â”‚    updateUI()          â”‚                      â”‚                    â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚                    â”‚
    â”‚                        â”‚                      â”‚                    â”‚
```

### äº‹ä»¶æ€»çº¿é€šè®¯

```
Component A                 EventBus              Component B
    â”‚                          â”‚                       â”‚
    â”‚  publish("build.start")  â”‚                       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
    â”‚                          â”‚   notify              â”‚
    â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                          â”‚                       â”‚
    â”‚                          â”‚   callback()          â”‚
    â”‚                          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                          â”‚                       â”‚
```

## ğŸ”Œ æ’ä»¶ç³»ç»Ÿè®¾è®¡

### æ’ä»¶ç”Ÿå‘½å‘¨æœŸ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Plugin.so    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ PluginManager::loadPlugin()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QPluginLoaderâ”‚
â”‚   .instance()â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ qobject_cast<IPlugin*>
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IPlugin    â”‚
â”‚ .initialize()â”‚â”€â”€â”€â”€â”€â”€â”€â”€> è®¢é˜…äº‹ä»¶ã€æ³¨å†ŒæœåŠ¡
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ è¿è¡Œä¸­
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Active     â”‚â”€â”€â”€â”€â”€â”€â”€â”€> å¤„ç†äº‹ä»¶ã€æä¾›åŠŸèƒ½
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Applicationå…³é—­
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  .shutdown() â”‚â”€â”€â”€â”€â”€â”€â”€â”€> æ¸…ç†èµ„æº
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ PluginManager::unloadPlugin()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Unloaded   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ å…³é”®è®¾è®¡æ¨¡å¼

| æ¨¡å¼ | åº”ç”¨ä½ç½® | ç›®çš„ |
|------|----------|------|
| **Singleton** | Application | å…¨å±€å”¯ä¸€å®ä¾‹ |
| **MVC** | æ•´ä½“æ¶æ„ | åˆ†ç¦»å…³æ³¨ç‚¹ |
| **Observer** | EventBus | å‘å¸ƒè®¢é˜… |
| **Plugin** | PluginManager | åŠ¨æ€æ‰©å±• |
| **Factory** | POUåˆ›å»º | å¯¹è±¡åˆ›å»º |
| **Strategy** | ç¼–è¯‘å™¨ | ç®—æ³•æ›¿æ¢ |

## ğŸ“Š ç±»å…³ç³»å›¾(æ ¸å¿ƒéƒ¨åˆ†)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Application â”‚
                    â”‚  (å•ä¾‹)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ owns
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                         â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
      â”‚   EventBus     â”‚       â”‚ PluginManagerâ”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚ manages
                                      â”‚
                               â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                               â”‚   IPlugin   â”‚ <<interface>>
                               â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚ implements
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚            â”‚            â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”´â”€â”€â”   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                  â”‚  LDPlugin   â”‚ â”‚FBD  â”‚   â”‚SFC      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ProjectModel  â”‚         â”‚  Project     â”‚
      â”‚<<QAbstractI..â”‚â—†â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ owns    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚ contains
                                      â”‚
                               â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                               â”‚    POU      â”‚ <<abstract>>
                               â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚ inherits
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚            â”‚            â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Program    â”‚ â”‚ Function â”‚ â”‚Function  â”‚
                  â”‚             â”‚ â”‚          â”‚ â”‚Block     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ¨ MVCæ¶æ„çš„ä¼˜åŠ¿ä½“ç°

### 1. **å¯æµ‹è¯•æ€§**
```cpp
// Model å¯ä»¥ç‹¬ç«‹æµ‹è¯•,æ— éœ€UI
void testProjectModel() {
    ProjectModel model;
    model.createProject("Test", "/tmp");
    ASSERT_TRUE(model.currentProject() != nullptr);
}
```

### 2. **å¯æ›¿æ¢æ€§**
```cpp
// å¯ä»¥è½»æ¾åˆ‡æ¢Viewå®ç°
MainWindow* view1 = new MainWindow();  // Qt Widgets
MainWindow* view2 = new QMLMainWindow(); // Qt QML
// Controllerä¸éœ€è¦ä¿®æ”¹
```

### 3. **å¯å¤ç”¨æ€§**
```cpp
// åŒä¸€ä¸ªModelå¯ä»¥è¢«å¤šä¸ªViewä½¿ç”¨
ProjectModel* model = new ProjectModel();
TreeView* treeView = new TreeView(model);
ListView* listView = new ListView(model);
```

### 4. **æ˜“ç»´æŠ¤æ€§**
- Modelä¿®æ”¹ä¸å½±å“View
- Viewä¿®æ”¹ä¸å½±å“Model
- Controlleråè°ƒé€»è¾‘æ¸…æ™°

## ğŸš€ ä¸‹ä¸€æ­¥é›†æˆå»ºè®®

### ä¼˜å…ˆçº§1: QScintillaé›†æˆ
```cpp
// æ›¿æ¢ CodeEditor ä¸º QsciScintilla
#include <Qsci/qsciscintilla.h>
#include <Qsci/qscilexercpp.h> // æˆ–è‡ªå®šä¹‰ST lexer

class CodeEditor : public QsciScintilla {
    // ... æ›´å¼ºå¤§çš„ç¼–è¾‘åŠŸèƒ½
};
```

### ä¼˜å…ˆçº§2: ANTLR4è¯­æ³•å®šä¹‰
```antlr
grammar ST;

program
    : PROGRAM ID declarations body END_PROGRAM
    ;

declarations
    : VAR variable_list END_VAR
    ;

// ... STè¯­è¨€è¯­æ³•è§„åˆ™
```

### ä¼˜å…ˆçº§3: å®Œå–„Controller
```cpp
class BuildController : public QObject {
    // ç¼–è¯‘æµç¨‹æ§åˆ¶
    bool compile();
    void handleErrors();
};

class DebugController : public QObject {
    // è°ƒè¯•æµç¨‹æ§åˆ¶
    void startDebugging();
    void setBreakpoint();
    void watchVariable();
};
```

## ğŸ“ æ€»ç»“

è¯¥æ¡†æ¶é‡‡ç”¨äº†**æˆç†Ÿçš„Qt MVCæ¶æ„**,ç»“åˆ**æ’ä»¶ç³»ç»Ÿ**å®ç°é«˜åº¦çš„:
- âœ… **æ¨¡å—åŒ–** - æ¸…æ™°çš„å±‚æ¬¡åˆ’åˆ†
- âœ… **å¯æ‰©å±•** - æ’ä»¶æœºåˆ¶
- âœ… **å¯ç»´æŠ¤** - MVCåˆ†ç¦»å…³æ³¨ç‚¹
- âœ… **å¯æµ‹è¯•** - Modelç‹¬ç«‹äºUI
- âœ… **è·¨å¹³å°** - Qt6æ”¯æŒ

æ ¸å¿ƒä»£ç å·²ç»æ­å»ºå®Œæˆ,å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Š:
1. é›†æˆæ›´å¼ºå¤§çš„ç¬¬ä¸‰æ–¹ç»„ä»¶(QScintilla, ANTLR4)
2. å®ç°ç¼–è¯‘å™¨å’Œé€šè®¯æ¨¡å—
3. å¼€å‘æ’ä»¶ç”Ÿæ€
